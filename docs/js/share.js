function getParams(){let n={},t=window.location.search.substr(1).split("&");for(let e=0;e<t.length;++e){var r=t[e].split("=");n[r[0]]=r[1]}return n}function drawImageFile(r,i,a,s){return new Promise(function(e,n){let t=new Image;a=a||0,s=s||0,t.onload=function(){r.drawImage(t,a,s),e()},t.src=i})}$("html, body").css("font-size",Math.min(window.innerHeight/20,window.innerWidth/15)),$("document").ready(function(){$("#reserved").hide();let e=getParams(),n=document.getElementById("canvas"),t=n.getContext("2d"),r=(e.result||0).toString(),i=e.operation||"share",a=resultList[r].result;drawImageFile(t,`../assets/img/result/${["dinner","papercutting","people","tiger","village"][r]}-bg.jpg`).then(function(){return drawImageFile(t,"../assets/img/result/textbox-transparent.png",0,100)}).then(function(){return drawImageFile(t,`../assets/img/share/${r}-text.png`)}).then(function(){return new Promise(function(e,n){t.font="66px XingKai";for(let e=0;e<a.length;++e)t.fillText(a[e],162,400+100*e);e()})}).then(function(){return new Promise(function(e,n){t.fillStyle="rgba(255, 255, 255, 0.6)",t.fillRect(0,1200,720,80),e()})}).then(function(){return drawImageFile(t,"../assets/img/share/yiban.png",175,1208)}).then(function(){return drawImageFile(t,"../assets/img/share/sdu-online.png",7,1215)}).then(function(){return new Promise(function(e,n){"share"===i?drawImageFile(t,"../assets/img/share/qr.jpg",553,1113).then(function(){return drawImageFile(t,"../assets/img/share/qr-text.png",347,1216)}).then(e):e()})}).then(function(){let e=new Image;e.src=$("#canvas")[0].toDataURL("image/jpg"),$("body").append(e),$(".loading").hide()})});